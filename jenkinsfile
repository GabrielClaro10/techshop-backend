pipeline {
    agent any

    stages {
        stage('Build Image') {
            steps {
                script {
                    // Caminho correto do Dockerfile no seu sistema
                    def dockerfilePath = 'C:/Users/Gabriel Claro/techshop-backend/app'

                    // Usar docker build e passar o caminho corretamente
                    bat "docker build -t techshop-immagem ${dockerfilePath} --file ${dockerfilePath}/Dockerfile"
                    
                    // (Opcional) Listar as imagens Docker para verificação
                    bat 'docker images'
                }
            }
        }
    }
}
